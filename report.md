В данном решении использована компинация двух способов. Сначала используется подход с циклическим использованем буфера для подсчёта размера исходного файла. Далее считываются n полученных символов и записываются в выходной файл. 
